<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
</head>
<body>
    <h1>API Debug Test</h1>
    <div id="results"></div>
    
    <script>
        async function testAPI() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>Testing APIs...</p>';
            
            try {
                // Test 1: Basic test endpoint
                console.log('Testing /api/test...');
                const testResponse = await fetch('/api/test');
                const testData = await testResponse.json();
                results.innerHTML += `<h3>Test API: ${testResponse.status}</h3><pre>${JSON.stringify(testData, null, 2)}</pre>`;
                
                // Test 2: Candidates GET
                console.log('Testing /api/candidates GET...');
                const candidatesResponse = await fetch('/api/candidates');
                const candidatesData = await candidatesResponse.json();
                results.innerHTML += `<h3>Candidates GET: ${candidatesResponse.status}</h3><pre>${JSON.stringify(candidatesData, null, 2)}</pre>`;
                
                // Test 3: History GET
                console.log('Testing /api/history GET...');
                const historyResponse = await fetch('/api/history');
                const historyData = await historyResponse.json();
                results.innerHTML += `<h3>History GET: ${historyResponse.status}</h3><pre>${JSON.stringify(historyData, null, 2)}</pre>`;
                
            } catch (error) {
                results.innerHTML += `<h3>Error:</h3><pre>${error.message}</pre>`;
                console.error('API Test Error:', error);
            }
        }
        
        // Run tests when page loads
        testAPI();
    </script>
</body>
</html>
